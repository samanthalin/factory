<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Smart Factory</title>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="font/css/font-awesome.min.css">
</head>
<body class="warning-data">
	<script>
	
	var urlMotorWsnAlarm =
		"https://blahdns-proxy-eusudefuvv.now.sh/http://140.124.184.204:8080/Cloud/WSNalarm/QueryAll";

	var fetchDataMotorWsnAlarm = url => {
		return fetch(url).then(resp => resp.json()).then(function(data) {
			//console.log(data);
			appendMotorWsnAlarm(data);
		});
	};

	fetchDataMotorWsnAlarm(urlMotorWsnAlarm);

	function appendMotorWsnAlarm(data) {
		var div = document.querySelector("#MotorWsnAlarm");
		data.forEach(e => {
			var temperature = String(e.temperature);
			var mote = String(e.mote);
			div.innerHTML += `
		${Date(e.timeStame)} &nbsp &nbsp
		溫度感測器 ${mote}&nbsp &nbsp
		Temparature ${temperature} &#8451; &nbsp &nbsp
		 ${e.message}
		<hr>
	`
		});
	}

	</script>
		<a href="index.html" class="home">
			<i i class="fa fa-th-large" aria-hidden="true"></i>
		</a>
		<div class="container">
			<div class="title">異常紀錄</div>
			<form>
		       <fieldset>
		          <!-- <legend>Selecting elements</legend> -->
		          <span>
		             <!-- <label>Select list</label> -->
		             <select id = "myList">
		               <option value = "1">全部時間</option>
		               <option value = "2">環境異常</option>
		               <option value = "3">馬達異常</option>
		             </select>
		          </span>
		          <span>
		             <!-- <label>Select list</label> -->
		             <select id = "myList">
		               <option value = "4">全部時間</option>
		               <option value = "5">一日內</option>
		               <option value = "6">一週內</option>
		             </select>
		          </span>

					<div id="MotorWsnAlarm"></div>

		       </fieldset>
		    </form>
		</div><!-- container -->
</body>
</html>